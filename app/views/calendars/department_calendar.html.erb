<!-- Author :Priyanka
 View for displaying all existing Leaves and Events according to Department -->
<div class="wrapper">
  <div class="container">
    <div class="row">                
      <div class="span12">
        <div class="content">         
				  <div class="module">
					  <div class="module-head">
              <h3>Department Events</h3>
              <label style="font-weight:normal;margin-top:-20px;" class = "pull-right"><a><i class=" icon-arrow-right"></i></a> <%= link_to 'Department Leaves',  calendars_department_leaves_calendar_path %></label>              
					  </div>
					  <div class="module-body">
					    <div class="control-group">
									<label class="control-label" for="basicinput">Department:</label>
									<div class="controls">
                    <%= select_tag "department", options_from_collection_for_select(Department.all, "id", "department_name"), class: "department-id" %>
                    <span class="help-block with-errors"></span> 
									</div>
						    </div><hr>	
					    <div id='calendar'>														   
					    </div>
	          </div><!--.module-body-->
					</div><!--/.module -->
		    </div><!--/.content-->
			</div><!--/.span12-->
		</div><!--/.row-->
	</div><!--/.container-->
</div><!--/.wrapper-->

<style>
  #calendar {
  max-width: 900px;
  margin: 0 auto;
}
</style>

<script>
 
 $('#department').change(function() {
 var index =$( "#department" ).val();
  $.ajax({
      type: "get",
      url: "/calendars/department_calendar",
      data: { 'dept_id': index } 
  }); 
});
</script>


<script>
$(document).ready(function() {
    $('#calendar').fullCalendar({
      header: {
        left: 'prev,next today',
        center: 'title',
        right: 'month,agendaWeek,agendaDay'
    },
          events: '/calendars/department_calendar.json',
            
          eventBackgroundColor: '#FFFFD1',
          eventTextColor: 'black'                                                  
     });
});
</script>
