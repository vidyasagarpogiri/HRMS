

  <%= form_tag('/calendar', method: :get, remote: true, :class => "form-horizontal") do %>
      <div class="row">
          <div class="form-group">
            <label class="control-label col-lg-2" for="amzur_event_title">Select </label>
            <div class="controls col-lg-10">
              <select  name="calendar_type" class="company_select form-control">
                <option value="Company">All</option>
                <option value="Department">Department</option>
                <option value="Group">Group</option>
                <option value="Workgroup">WorkGroup</option>
                <option value ="Reportees">Reportees</option>
              </select>
            </div> 
          </div>
          <div class="form-group">
             <label class="control-label col-lg-2" for="amzur_event_title">Select </label>
            <div class="col-lg-10">
              <div id ="departments">             
                <%= select_tag :department_id, options_from_collection_for_select(Department.all, "id", "department_name"), prompt: "All Departments", :class => "form-control" %>
              </div>
              
              <div id="groups">
                <%= select_tag :group_id, options_from_collection_for_select(Group.all, "id", "group_name"), prompt: "All Groups", :class => "form-control" %>  
              </div>
            
              <div id="workgroups">
                <%= select_tag :workgroup_id, options_from_collection_for_select(Workgroup.all, "id", "name"), prompt: "All Work Groups", :class => "form-control" %>
              </div>
            </div>
          </div>
      </div>  
      <hr>               
  <% end %>

<script>
  $(function(){
          $("#departments").hide();
          $("#groups").hide();
          $("#workgroups").hide();
  
  $(".company_select").change(function () {
    var str = $( ".company_select" ).val();  
    console.log(str);
    switch (str) { 
    case 'Group': 
           console.log(str);
          $("#departments").hide();
          $("#groups").show();
          $("#workgroups").hide();
        break;
    case 'Department':
    console.log(str); 
        $("#departments").show();
          $("#groups").hide();
          $("#workgroups").hide();
        break;
    case 'Workgroup': 
    console.log(str);
        $("#departments").hide();
          $("#groups").hide();
          $("#workgroups").show();
        break;      
    case 'Company': 
    console.log(str);
         $("#departments").hide();
          $("#groups").hide();
          $("#workgroups").hide();

    case 'Reportees': 
      $("#departments").hide();
      $("#groups").hide();
      $("#workgroups").hide();
    }
     $(this).closest('form').submit();
  });
  $("#department_id").change(function(){
    $(this).closest('form').submit();
  }); 
  
  $("#workgroup_id").change(function(){
    $(this).closest('form').submit();
  }); 
  
   $("#group_id").change(function(){
    $(this).closest('form').submit();
  }); 
});
</script>
