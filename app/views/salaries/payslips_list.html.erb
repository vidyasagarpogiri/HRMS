<div class="wrapper">
  <div class="container">
    <div class="row">                                             
      <div class="span12">
        <div class="content">
          <div class="module">
            <div class="module-head" style="background-color: #82B4E6 ">
              <h3>pay slips
              </h3>
            </div>
            <div class="module-body">
              <div class="row-fluid">
                <div class="span6">           
                   <%= form_tag(payslips_path, :class => "form-horizontal" ) do %>
                    
                        <label><strong>Select Month to generate payslip :&nbsp&nbsp </strong><br>
                        <select name="payslip_view_month">
                          <option value=0>-select-</option>
                          <option value=1>Jan</option>
                          <option value=2>Feb</option>
                          <option value=3>Mar</option>
                          <option value=4>Apr</option>
                          <option value=5>May</option>                  
                          <option value=6>Jun</option>
                          <option value=7>Jul</option>
                          <option value=8>Aug</option>
                          <option value=9>Sep</option>
                          <option value=10>Oct</option>
                          <option value=11>Nov</option>
                          <option value=12>Dec</option>
                        </select>
                        <select name="payslip_view_year">
                          <option>2014</option>
                        </select> 
                        <input type="submit" class="btn btn-success" value="Generate">                
               
                   <% end %>
               </div>
               <div class="span6">
             <%= form_tag(payslips_view_path, method: :get,  :class => "form-horizontal") do %>
            
                <label><strong>Select Month to View payslip :&nbsp&nbsp </strong><br>
                <select name="payslip_view_month">
                  <option value=0>-select-</option>
                  <option value=1>Jan</option>
                  <option value=2>Feb</option>
                  <option value=3>Mar</option>
                  <option value=4>Apr</option>
                  <option value=5>May</option>                  
                  <option value=6>Jun</option>
                  <option value=7>Jul</option>
                  <option value=8>Aug</option>
                  <option value=9>Sep</option>
                  <option value=10>Oct</option>
                  <option value=11>Nov</option>
                  <option value=12>Dec</option>
                </select>
                <select name="payslip_view_year">
                  <option value=0>-select-</option>
                  <option>2014</option>
                </select> 
                <input type="submit" class="btn btn-success" value="View">                
      
           <% end %>  
               </div>
             </div></br>
                                
                <!-- code for displayin all employees payslips -->   
                <div class="employee_payslip">             
                <table class="table table-striped table-bordered table-condensed">
                   <thead>
                   <tr>
                    <% if @month.present? && @year.present?%>
                      <th><strong>PaySlips For <%= Date::MONTHNAMES[@month] %>, <%= @year %></strong></th>
                    <% else %>
                      <th><strong>PaySlips For <%= Date::MONTHNAMES[@payslip.month] %>, <%= @payslip.year %></strong></th>
                    <% end %>
                   </tr>
                   <tr>
                      <th>Employee-Id</th>
                      <th>Name</th>
                      <th>Department</th>
                      <th>Total Working days</th>
                      <th>Basic</th>
                      <th>Gross</th>
                      <th>Total Deductions</th>
                      <th>NetPay</th>
                      <th>Aciton</th>
                    </tr>
                   </thead>
                   <% @payslips.each do |payslip| %>
                   <tbody>
                    <tr>
                      <td><%= payslip.employee.employee_id %></td>
                      <td><%= link_to payslip.employee.full_name, "payslip/#{payslip.id}" %></td>
                      <td><%= payslip.employee.department.department_name %></td>
                      <td><%= payslip.no_of_working_days%></td>
                      <td><%= payslip.basic_salary%></td>
                       <td><%= payslip.gross_salary %></td>
                      <td><%= payslip.total_deductions %></td>
                      <td><%= payslip.netpay %></td>
                      <td><%= link_to 'Edit', "payslip/#{payslip.id}/edit", :remote => true %></td>
                   </tbody>
                       <% end %> 
                </table>
                </div>            
              </div>
            </div><!--/.module-->
            <div id="payslip_edit">
            </div>
            <div class="monthly_payslips"></div>
        </div><!--/.content-->                    
      </div><!--/.span9-->                
    </div><!--/.row-->
  </div><!--/.container-->
</div><!--/.wrapper-->

