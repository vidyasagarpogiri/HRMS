<div class="wrapper">
  <div class="container">
    <div class="row">
      <div class="span12">
        <div class="content">
          <div class="module">
            <div class="module-head">
              <h3>My Self Description</h3>
            </div>
            <div class="module-body">
             <%= form_tag  employee_self_description_create_employee_path(@employee), method: :patch do %>
             
             
                <div class="control-group">
                <label class="control-label" for="basicinput">Description</label>
                <div class="controls">
                  <%#= bootsy_area :self_description, :class => "span8 form-control", :placeholder =>"Enter Project Description", :data => {:error => "Please Enter Project Description"}, :required => true, :style => "margin: 0px 0px 10px; width: 650px; height: 221px;" %>
                  
                   <%= bootsy_area 'post','self_description', class: 'form-control', value: raw(@employee.self_description), style: 'margin: 0px 0px 10px; width: 650px; height: 221px;', required: true%>
                  <span class="help-block with-errors"></span>   
                </div>
              </div>
              
              <div class="control-group">
                <label class="control-label" for="basicinput">Personal Interests</label>
                  <div class="controls">
                  <%= text_area_tag  'interests', " ", value: @employee.interests, :style => "width: 650px;"	 %>
                  <span class="help-block with-errors"></span>
                </div>
              </div>
              
              
              <div class="control-group">
                <label class="control-label" for="basicinput">Personal Skill</label>
                <div class="controls">
             <input type="text"  class = "term_skill span7 form-control", name= "skills" , place_holder = "Enter Reporting Manager Name" data-error="Please Enter valid Employee Reporting Manager" required>
                  <input type="hidden" name="hidden_skill" class="hidden_skill">
                   <span class="help-block with-errors"></span>
                   <span id="advanced_search_box"></span>
                </div>
              </div>
              
              <ul class="navigation-btns" style="margin: 10px 0 10px 720px;">
		           <li><button type="submit" class="btn btn-success"> Save </button></li>
			         <li> <%= link_to 'Cancel',employee_self_description_show_employee_path(@employee.id), :class=>"btn btn-danger "%></li>									
	           </ul>	
            
            <%end%>
            </div><!--/.module-body-->
          </div><!--/.module-->
        </div><!--/.content-->
      </div><!--/.span12-->
    </div><!--/.row-->
  </div><!--/.container-->
</div><!--/.wrapper-->





<script>
  $(function() {
  var availableTags = [];
  $.get( "/getAllSkills.json", function( data ) {
      $.each( data, function( key, val ) {
       availableTags.push(val);
       //alert(val["id"]+" - "+val["value"]);
      });
  });
  
       $( ".term_skill" ).autocomplete({
        minLength: 2,
        source: availableTags,
        focus: function( event, ui ) {
        $(".term_skill").val("");
        if ($(".hidden_skill").val() == ""){
          $(".hidden_skill").val(ui.item.id);
        }
        else{
          var skills = $(".hidden_skill").val()+", "+ui.item.label;
          $(".hidden_skill").val(skills)
        }
        //alert($( ".term_skill" ).val());
         span = get_box(ui.item.label);
         $('#advanced_search_box').append(span);
        return false;
        }
        });
        
        function get_box(text){
    return "<span style='margin:5px;margin-left:0px;min-width: 40px;color: #FFF !important;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25); background-color: #36ACD1;background-image: -moz-linear-gradient(top, #3FC6F2, #36ACD1);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#3FC6F2), to(#36ACD1)); background-image: -webkit-linear-gradient(top, #3FC6F2, #36ACD1);background-image: -o-linear-gradient(top, #3FC6F2, #36ACD1); background-image: linear-gradient(to bottom, #3FC6F2, #36ACD1);background-repeat: repeat-x;border-color: #3FC6F2 #30A1C4 #36ACD1; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = &#39;#ff0088cc&#39;, endColorstr = &#39;#ff0044cc&#39;, GradientType = 0); filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);' class='btn btn-primary' onclick='$(this).hide();remove_skill(&#39;"+text+"&#39;);'>"
    +text+" <span style='text-shadow: 0 1px 0 #FFF;opacity: 0.3;'> X</span></span>"
  }
  
function remove_skill(text){
    var all_skills=$(".hidden_skill").val().split(", ");
    all_skills=jQuery.unique(all_skills);
    all_skills = jQuery.grep(all_skills, function(value) {
        return value != text;
    });
    all_skills = all_skills.join(", ");
    $(".hidden_skill").val(all_skills);
  }

  });
  </script>
