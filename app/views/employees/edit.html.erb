  <div id="page-wrapper">
           <div class="row">
                <div class="col-lg-12">
                    <h2 class="page-header">Employee Details</h2>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row">
                            <div class="col-lg-12" >
                                    <div class="form-group " style="color:#FF4D4D;">
                                      <% @employee.errors.full_messages.each do |error| %>
                                        <label class="col-lg-3"><%= error %></label>
                                      <% end %>                                      
                                   </div>                                   
                                </div>
                            <%= form_for(@employee) do |f| %>
                                   <div class="col-lg-12">
                                        <div class="form-group col-lg-6">                                        
                                            <label class="required" >Employee Id</label>
                                              <%= f.text_field :employee_id, :class => "form-control", :placeholder =>"Enter Emp Id" %>                 
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Title</label><br>                                           
                                             <%= f.select(:title, options_for_select([['Mr', 'Mr'], ['Mrs', 'Mrs']]), {}, :class=> "form-control", :id=>"disabledSelect") %>
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Employee First Name</label>
                                            <%= f.text_field :first_name, :class => "form-control",  :placeholder=>"Enter First name" %>        
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required" >Employee Last Name</label>
                                             <%= f.text_field :last_name, :class =>"form-control", :placeholder => "Enter Last name" %>      
                                        </div>
																				<div class="form-group col-lg-6"">
                                            <label class="required">Date Of Joining</label>
                                            <%= text_field(:employee, :date_of_join, :placeholder=>"Enter Date Of Joining", :class=>"form-control datepicker") %>                                           
                                        </div>
                                        <% a = []%>
                                         <%  JobLocation.all.each do |j| 
                                          b=[]
                                          b << j.address.city 
                                          b << j.id
                                          a << b
                                         end  %>
                                   
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Job Location</label>
                                            <%= f.select :job_location_id, a,  { :prompt => "Please Select" }, { :class => "job_location, form-control", :id => "disabledSelect" } %>                                           
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Blood Group</label><br>
                                             <%= f.collection_select :blood_group_id, BloodGroup.all, :id, :blood_group_name, { :prompt => "Please Select" }, { :class => "blood_group, form-control", :id => "disabledSelect" } %> 
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Mobile Number</label>   
                                              <%= f.text_field :mobile_number, :class=>"form-control", :placeholder=>"Enter Mobile No" %>        
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Email Id</label>
                                            <input class="form-control" placeholder="Enter Email id", name="email", value=<%= current_user.email %> disabled >
                                        </div>  
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Alternate E-Mail </label>
                                             <%= f.text_field :alternate_email, :class=>"form-control", :placeholder=>"Enter Alternate Email" %>        
                                           
                                        </div>
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Department</label><br>
                                            <%= f.collection_select :department_id, Department.all, :id, :department_name, { :prompt => "Please Select" }, { :class => "department, form-control", :id => "disabledSelect1" } %>
                                        </div>
                                        
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Designation</label><br>
                                             <%= f.grouped_collection_select :designation_id, Department.all, :designations, :department_name,  :id, :designation_name, { :prompt => "Please Select" }, { :class => "designation form-control", :id=>"disabledSelect"  } %>    
                                        </div>
                                        
                                       
																				<div class="form-group col-lg-6"">
																				<label class="required" >Role</label><br>
                                           <%= f.collection_select :role_id, Role.all, :id, :role_name, { :prompt => "Please Select" }, { :class => "role, form-control", :id => "disabledSelect" } %> 
                                        </div>
                                        <div class="form-group col-lg-6"">
                                           <label class="required">Date Of Birth</label>
                                            <%= text_field(:employee, :date_of_birth, :placeholder=>"Enter Date Of Birth", :class=>"form-control datepicker") %>
                                        </div>
                                                                                                                    
                                        
                                         <div class="form-group col-lg-6"">
                                            <label class="required">Gender</label><br>
                                             <%= f.select(:gender, options_for_select([['Male', 'Male'], ['Female', 'Female']]), {}, :class=> "form-control", :id=>"disabledSelect") %>
                                        </div>                                        
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Father Name</label>
                                            <%= f.text_field :father_name, :class => "form-control",  :placeholder=>"Enter Father name" %>
                                                                              
                                        </div>                                     
                                        <div class="form-group col-lg-6"">
                                            <label class="required">Grade/Level</label><br>
                                           <%= f.grouped_collection_select :grade_id, Department.all, :grades, :department_name,  :id, :value, { :prompt => "Please Select" }, { :class => "grades form-control", :id=>"disabledSelect"  } %>
                                        </div>                                         
                                         <div class="form-group col-lg-6"">
                                            <label class="required">Upload Image:</label><br>
                                            <%= f.file_field :avatar %>
                                         </div>  
                                         <div class="form-group col-lg-6"">
                                            <label class="required"> Reporting Manager</label><br>
                                               <%= f.collection_select :id, Employee.all, :id, :first_name, { :prompt => "Please Select" }, { :class => "employee, form-control", :name=> "reporting_id" } %>
                                        </div>   
                                        
                                  <button type="submit" class="btn btn-success pull-right">Save & Continue</button>
                                    <% end %>
                                </div>
                                <!-- /.col-lg-6 (nested) -->
                            </div>
                            <!-- /.row (nested) -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>


         </div>
          <!-- /#page wrapper -->
          
          
          <script>
            $(document).ready(function() {
              $("#employee_id").val('<%= ReportingManager.find_by_employee_id(@employee.id).manager_id if ReportingManager.find_by_employee_id(@employee.id).present? %>');
                  });
          </script>
          
          <script>
             
$(function() {
    $( ".datepicker" ).datepicker({ dateFormat: 'dd/mm/yy' })
  });

            var designations = $('.designation').html();
            var grades = $('.grades').html();
            $('#disabledSelect1').change(function() {
             var department = $('#disabledSelect1 :selected').text();
             var  options = $(designations).filter("optgroup[label='"+department+"']").html();
             var gradeoptions = $(grades).filter("optgroup[label='"+department+"']").html();
             
              if (options) {
                $('.designation').html(options);
                $('.designation').parent().show();
                }
              else {
                $('.designation').empty();
                $('.designation').parent().hide();
                }
             
             if (gradeoptions) {
                $('.grades').html(gradeoptions);
                $('.grades').parent().show();
                }
              else {
                $('.grades').empty();
                $('.grades').parent().hide();
                }
            });
    
 </script>
          
