<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-info">
      <div class="panel-heading">
        Project Form
      </div>
      <div class="panel-body">
        <%= form_for @project,  :data => {:toggle => "validator"}, :html => {:class=>"form-horizontal row-fluid"}, :remote=> true do |f| %>
        
        <div class="form-group">
          <label class="control-label col-lg-2" for="basicinput">Project Title</label>
          <div class="col-lg-8">
            <%= f.text_field :title, :class => "form-control", :placeholder =>"Enter Project Title", :data => {:error => "Please Enter valid Project Code"}, :required => true %>
            <span class="help-block with-errors"></span>
          </div>
        </div>
        <div class="form-group">
          <label class="control-label col-lg-2" for="basicinput">Start Date</label>
          <div class="col-lg-8" >
            <%= f.text_field :start_date, :class => "from form-control",:placeholder => "Select Project Start Date", :data => {:error => "Please Enter valid Joining Date"}, :required => true %>
            <span class="help-block with-errors"></span>   
          </div>
        </div>

        <div class="form-group">
          <label class="control-label col-lg-2" for="basicinput">End Date </label>  
          <div class="col-lg-8">
            <%= f.text_field :end_date, :class => "to form-control", :placeholder => "Select Project End Date", :data => {:error => "Please Enter valid Relieving Date"}%>
            <span class="help-block with-errors"></span>   
          </div>
        </div>
        
        <div class="form-group">
          <label class="control-label col-lg-2" for="basicinput">Description</label>
          <div class="col-lg-8">
            <%= f.text_area :description, :class => "form-control", :placeholder =>"Enter Project Description", :data => {:error => "Please Enter Project Description"}, :required => true %>
            <span class="help-block with-errors"></span>   
          </div>
        </div>

        <div class="form-group">
          <label class="control-label col-lg-2" for="basicinput">Roles</label>
          <div class="col-lg-8">
            <%= f.text_field :roles, :class => "form-control", :placeholder =>"Enter roles Performed", :data => {:error => "Please Enter valid Tasks"}, :required => true %>
            <span class="help-block with-errors"></span>
          </div>
        </div>

        <div class="form-group">
          <label class="control-label col-lg-2" for="basicinput">Taskes Performed</label>
          <div class="col-lg-8">
            <%= f.text_area :tasks_performed, :class => "form-control", :placeholder =>"Enter Tasks Performed", :data => {:error => "Please Enter valid Tasks"}, :required => true %>
            <span class="help-block with-errors"></span>
          </div>
        </div>

     
        <div class="form-group">
              <label for="inputEmail1" class="col-lg-2 col-sm-2 control-label">key Skills Used</label>
              <div class="col-lg-8">
                 <input id="s" type="text">
               <input type="hidden" name="hidden_tags" class="hidden_tags">
                <span id="advanced_search_box"></span><br><br>
            
               <span class="pull-left">
                <% if @project.skills.present?%>               
                <% @project.skills.split(",").each do|tag| %>
                  <i class="label label-info fa fa-tag" style="font-size: 13px"><%=  tag %></i>
                <% end %> 
              
                <%end%>
                </span>
                 
                <input type="hidden" name="total_tags" class="total_tags">
              </div>
          </div>
        
        

        <div class="form-group">
          <div class="col-lg-offset-2 col-lg-10">
            <button type="submit" class="btn btn-success" data-remote="true">Save</button>
            <%= link_to "Cancel", projects_path,:class => "btn btn-danger",  :remote => true %>
          </div>
        </div>	
        <% end %>
      </div>
    </div><!--/.module-body-->
  </div><!--/.module-->
</div>



  <script>    
    $(function() {
      $( ".datepicker" ).datepicker({ dateFormat: 'dd/mm/yy' })
    });
  </script>

  <script>
    $(function () {
      $(".from").datepicker({
        dateFormat: 'dd/mm/yy',
        changeMonth: true,
        changeYear: true,
        maxDate: -0,
        yearRange: "-100:+0",
        onClose: function (selectedDate) {
          var date2 = $('.from').datepicker('getDate');
          date2.setDate(date2.getDate());
          $(".to").datepicker("option", "minDate", date2);
        }
      });
      $(".to").datepicker({
        dateFormat: 'dd/mm/yy',
        maxDate: -0,
        yearRange: "-0:+100",
        changeMonth: true,
        changeYear: true
      });
    });
  </script>



<script>
$(function(){
    var tags= "";
    var total_tags="";
    var present_tags = "<%= @project.skills %>";
$("#s").keypress(function(e) {
    if(e.which == 13) {
    var tag = $("#s").val();
    //var all_tags  = tag+ ","+ $("#s").val()
    span = get_box(tag);
    $('#advanced_search_box').append(span);
    tags = tags+ tag + "," ;
    $("#s").val("");
    $(".hidden_tags").val(tags); 
    total_tags = tags + present_tags
    $(".total_tags").val(total_tags);
    e.preventDefault();
    return false;
     
    }
});  
   });


 function get_box(text){
    return "<span style='margin:5px;margin-left:0px;min-width: 40px;color: #FFF !important;text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25); background-color: #36ACD1;background-image: -moz-linear-gradient(top, #3FC6F2, #36ACD1);background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#3FC6F2), to(#36ACD1)); background-image: -webkit-linear-gradient(top, #3FC6F2, #36ACD1);background-image: -o-linear-gradient(top, #3FC6F2, #36ACD1); background-image: linear-gradient(to bottom, #3FC6F2, #36ACD1);background-repeat: repeat-x;border-color: #3FC6F2 #30A1C4 #36ACD1; border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25); filter: progid:DXImageTransform.Microsoft.gradient(startColorstr = &#39;#ff0088cc&#39;, endColorstr = &#39;#ff0044cc&#39;, GradientType = 0); filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);' class='btn btn-primary' onclick='$(this).hide();remove_tags(&#39;"+text+"&#39;);'>"
    +text+" <span style='text-shadow: 0 1px 0 #FFF;opacity: 0.3;'> X</span></span>"
  }
function remove_tags(text){
var present_tags = "<%= @project.skills %>";
console.log(text);
var tags =  $(".hidden_tags").val().split(",");
tags = jQuery.grep(tags, function(value) {
        return value !== text;
    });    
    tags = tags.join(",");
    $(".hidden_tags").val(tags);
    total_tags = tags + present_tags;
    $(".total_tags").val(total_tags); 
}
</script>

