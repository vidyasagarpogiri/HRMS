<!--Author: Priyanka
    employee dashboard-->
<div class="module">
  <div class="module-head">							
    <h3>What's New</h3>   
  </div>
  <div class="module-body exp">    
    <% @welcome_albums.each do |album| %>
    <div class="" style="border:solid 1px #eee;">
      <div class="album-employee-image span4" style="margin-top:10px">
        <% if album.present? && album.employee.avatar_url.present? %>
          <%= image_tag album.employee.avatar_url, :width => "60px", :height => "60px" %>
        <% else %>
          <% if album.employee.gender == "Female" %>
              <%= image_tag("1.jpg", :style => "width:60px;height:60px;") %> 
            <% else %>
	            <%= image_tag "user.png", :width => "60px", :height => "60px" %> 
            <% end %>
        <% end %>
      </div>     
      <div class="album-employee-details" >
        <strong>
          <%= album.employee.first_name %> <%= album.employee.last_name %>
        </strong> added  <strong><%= pluralize(album.photos.count, 'photo') %></strong> to
        <strong>
          <a href="<%= album_path(album) %>"><%= album.title %></a>
        </strong> Aldum
      </div>
      
      <% if album.photos.present?%> 
      <div class="slider slider-for" style="margin-top:50px;margin-left:100px">
        <% album.photos.each do |photo| %>
          <div style="width:400px;height:250px;overflow:hidden;">
            <a class="group1" href="<%= photo.image %>"><img src="<%= photo.image %>" width="300px" height="200" ></a>
          </div>            
        <% end %>
      </div>
      <div class="slider slider-nav">
        <% album.photos.each do |photo| %> 
          <div ><img src="<%= photo.image %>" width="100px" height="100"></div>
        <% end %> 
      </div>     
     
      <% end %>      
    </div><br>                      
    <% end %>
    <%= paginate @welcome_albums, :param_name => 'page4' %> 
  </div>
</div>  

 



<div class="module">
  <div class="module-head">							
    <h3>Reporting</h3>   
  </div>

  <div class="module-body exp">
    <table class="table table-striped table-hover text" id="test">					      
      <tr>
        <th>Report-to</th>
        <td><%= @employee.reporting_manager %></td>
      </tr>
      <tr>
        <th>Reporting-to-me</th>
        <td>
        <% i = 0%>
          <% @reportee_employees.each do |emp|%>          
          <tr >
            
            <td></td>
            <td><%= emp.full_name %></td>
          </tr>
          <% i+=1 %>
          <% end %>
        </td>        
      </tr>                       
    </table>
    <% if i>2 %>
    <i class="glyphicon glyphicon-sort btn" style="margin-left:300px;"></i> <br>
    <% end %>
  </div><!--/.module-body -->
</div><!--/.module -->      
                                                           
<div class="module">
  <%= render 'employee_attendence/my_login_out'%>  
</div><!--/.module --> 
                                
<div class="module">
  <div class="module-head">							
    <h3>My Leaves</h3>   
  </div>

  <div class="module-body exp">
  <% if @employee.group.present? && @employee.group.leave_policy.present? %>
    <table class="table table-striped table-hover" id="sample-table-2"> 
  											      
        <tr>
          <th>Leaves-Earned</th>         
          <td> <%= pluralize(total_leaves(@employee)+0, 'day') %> </td>
        </tr>
        <tr>
          <th>Leaves Utilized</th>
          <td><%= pluralize(total_used_leaves(@employee)+0, 'day') %></td>
        </tr>  
         <tr>
          <th>Balance Leaves</th>
          <td><%= pluralize(total_balance_leaves(@employee)+0, 'day') %></td>
        </tr>  
         <tr>
          <th>Upcoming Leaves</th>
          <td>
            <% if @latest_leave.present? %>
            <ul>
            <% @latest_leave.each do |leave|%>
            <li><b>Days : <%= leave.days%></b> , <b>FROM</b> <%= format_date(leave.from_date.to_date) %> <b>TO</b> <%= format_date(leave.to_date.to_date)%></li>
            <%end%>
            </ul>
            <% end %>
          </td>
        </tr>               
    </table> 
   <% else %>
    <div class="alert alert-success alert-dismissable">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
         Your leave policy did not set,  please contact HR
    </div>
   <% end %>   
  </div><!--/.module-body -->
</div><!--/.module -->  
        
      
<script type="text/javascript">
  $("#test tr:nth-child(n+5)").hide()
    $('.btn').click(function(){  
       $(".btn").show();
      $("#test tr:nth-child(n+5)").toggle()
  });
</script>

<script>
  $(function() {
    $( document ).tooltip();
  });

    $(function() {
  $(".group1").colorbox({rel:'group1', transition:"none", width:"75%", height:"75%"});
  
   $('.slider-for').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      fade: true,
      asNavFor: '.slider-nav'
  });
  $('.slider-nav').slick({
      slidesToShow: 3,
      slidesToScroll: 1,
      asNavFor: '.slider-for',
      dots: true,
      centerMode: true,
      focusOnSelect: true
  });
      
  
  });
  </script>

