<div class="panel panel-info">
  <div class="panel-heading"> 
    Policy Details Form
  </div>        
  <div class="panel-body">
     <%= form_for @policy,  :data => {:toggle => "validator"}, :html => {:class=>"form-horizontal row-fluid policy_from"} do |f| %>
        <div class="form-group">
            <label for="inputEmail1" class="col-lg-2 control-label">Policy Title</label>
            <div class="col-lg-10">
                <%= f.text_field :title, :class => "span8 form-control", :placeholder =>"Enter Policy Title", :data => {:error => "Please Enter valid Policy Title"}, :required => true %>
          <span class="help-block with-errors"></span>
                
            </div>
        </div>
               
         <div class="form-group">
            <label for="inputPassword1" class="col-lg-2 control-label">Descrption</label>
            <div class="col-lg-10">
             <%= f.bootsy_area :details, :class => "span8 form-control", :placeholder =>"Enter Policy Details", :data => {:error => "Please Enter Policy  Details"}, :required => true, :style => "margin: 0px 0px 10px; width: 850 px; height: 221px;" %>
         <span class="help-block with-errors"></span>
            </div>
        </div>
        
        
        <div class="form-group">
          <label for="exampleInputFile" class="col-lg-2 control-label">Upload Attachment</label>
          <div class="col-lg-10">
             <%= f.file_field :document, :onchange =>"validateFiles(this);",:data => {:max_file_size => 5.megabytes,:error => " Please Choose a file to attach"} %>
                  <% if @policy.document_url.present? %>
                  Existing Attachment: <%= link_to "Attachment", @policy.document_url, :target => "/blank"%>
                  <%end%>
          </div> 
        </div>                
           <div class="form-group">
            <div class="col-lg-offset-2 col-lg-10">          
              <button type="submit" class="btn btn-success">Save</button>&nbsp&nbsp
              <%= link_to "Cancel", policies_path,:class => "btn btn-danger" %>
           </div>            
        </div>
    <% end %>
  </div>
</div>




 <!-- script for image uploading-->
    
<script>
  function validateFiles(inputFile) {
  var maxExceededMessage = "This file exceeds the maximum allowed file size (5 MB)";
  var extErrorMessage = "Only file with extension: .jpg, .jpeg, .gif, .png, .pdf, .ppt, .pptx, .doc, .docx, .zip, .rar, .txt, .xls is allowed";
  var allowedExtension = ["jpg", "LPG", "JPEG", "jpeg", "gif", "GIF",  "png", "PNG",  "doc", "DOC", "docx", "DOCX", "ppt", "PPT", "pptx", "PPTX", "xls", "XLS", "xlsx", "XLSX", "txt", "TXT", "rar", "RAR", "pdf", "PDf", "psd", "PSD"]; 
  
  var extName;
  var maxFileSize = $(inputFile).data('max-file-size');
  var sizeExceeded = false;
  var extError = false;
  
  $.each(inputFile.files, function() {
    if (this.size && maxFileSize && this.size > parseInt(maxFileSize)) {sizeExceeded=true;};
    extName = this.name.split('.').pop();
    if ($.inArray(extName, allowedExtension) == -1) {extError=true;};
  });
  if (sizeExceeded) {
    window.alert(maxExceededMessage);
    $(inputFile).val('');
  };
  
  if (extError) {
    window.alert(extErrorMessage);
    $(inputFile).val('');
  };
}
</script>

<script>
  $(function() {
    $(".policy_form").validator();
  });
</script> 

