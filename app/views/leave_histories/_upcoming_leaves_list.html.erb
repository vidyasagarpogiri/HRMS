<div class="module-head">																													
<h3>Upcoming Leaves List</h3> 							
</div>                                          
<div class="module-body">
<% if @leave_histories.present? %> 	  	
  <table class="table table-striped table-bordered table-condensed">
		<thead>
			<tr>
			  <th>Date</th>
				<th>No.of Days</th>
				<th>Reason</th>
				<th>Leave Type</th>																							
				<th>Status</th>
				<th colspan=2>Action</th>								
			</tr>
		</thead>
	 <%  @leave_histories.each do |f| %>	
	 <% unless f.from_date.to_date <= Date.today %>									
		<tbody>												
			<tr>               
			 	<% if f.is_halfday %>
			    <td><%= format_date(f.from_date) %></td>
			    <td>half day(<%= f.section %>)</td>               
			  <% else %>
			 	   <td><%= format_date(f.from_date) %> - <%= format_date(f.to_date) %> </td>													
				   <td>  <%= pluralize(f.days, 'day') %>  </td>
				 <% end %>
				<td><span style='display: none;'><%= f.reason %></span><%= truncate(f.reason) { link_to "Continue", "#", :data => {:toggle => "modal", :target => "#myModal3"}, :id => "modal-text" } %>  </td>
				<td><%=f.leave_type.type_name %> </td>													
				<td><%=f.status %></td>
				<td><%= link_to "Edit", edit_leave_history_path(f),  :class => "btn btn-info", :remote => true  %>
				<%= link_to "Cancel",  f, method: :delete, data: {confirm: "Are You sure?"} , :class => "btn btn-danger"%></td>		 
			</tr>																						
		</tbody>
    <% end %>
    <% end %>	                   
	</table>									
    <div class="pagination pagination-centered upcoming_leaves_list ">                      

    </div>									
	<% else %>
	  <div class="alert alert-success alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
         You have No Leaves Requests 
    </div>   
	<% end %>																					      
</div><!--module body-->	
							
							
							
							
									
<script>
$(function(){
  $("td a[id='modal-text']").click(function(){
    var content=$(this).prev().text();
    $("#modal_body-reason2").text(content);
  });
  

});
</script>



<!-- Modal -->
<div class="modal hide" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Reason for leave</h4>
      </div>
      <div class="modal-body">
        <span id="modal_body-reason2"></span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
								
