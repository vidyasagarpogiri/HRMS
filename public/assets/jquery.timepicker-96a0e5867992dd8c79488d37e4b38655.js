!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function i(e){if(e.minTime&&(e.minTime=v(e.minTime)),e.maxTime&&(e.maxTime=v(e.maxTime)),e.durationTime&&"function"!=typeof e.durationTime&&(e.durationTime=v(e.durationTime)),"now"==e.scrollDefault?e.scrollDefault=v(new Date):e.scrollDefault?e.scrollDefault=v(e.scrollDefault):e.minTime&&(e.scrollDefault=e.minTime),e.scrollDefault&&(e.scrollDefault=v(r(e.scrollDefault,e))),e.timeFormat.match(/[gh]/)&&(e._twelveHourTime=!0),e.disableTimeRanges.length>0){for(var i in e.disableTimeRanges)e.disableTimeRanges[i]=[v(e.disableTimeRanges[i][0]),v(e.disableTimeRanges[i][1])];e.disableTimeRanges=e.disableTimeRanges.sort(function(e,i){return e[0]-i[0]});for(var i=e.disableTimeRanges.length-1;i>0;i--)e.disableTimeRanges[i][0]<=e.disableTimeRanges[i-1][1]&&(e.disableTimeRanges[i-1]=[Math.min(e.disableTimeRanges[i][0],e.disableTimeRanges[i-1][0]),Math.max(e.disableTimeRanges[i][1],e.disableTimeRanges[i-1][1])],e.disableTimeRanges.splice(i,1))}return e}function t(i){var t=i.data("timepicker-settings"),s=i.data("timepicker-list");if(s&&s.length&&(s.remove(),i.data("timepicker-list",!1)),t.useSelect){s=e("<select />",{"class":"ui-timepicker-select"});var n=s}else{s=e("<ul />",{"class":"ui-timepicker-list"});var n=e("<div />",{"class":"ui-timepicker-wrapper",tabindex:-1});n.css({display:"none",position:"absolute"}).append(s)}if(t.noneOption)if(t.noneOption===!0&&(t.noneOption=t.useSelect?"Time...":"None"),e.isArray(t.noneOption)){for(var l in t.noneOption)if(parseInt(l,10)===l){var u=a(t.noneOption[l],t.useSelect);s.append(u)}}else{var u=a(t.noneOption,t.useSelect);s.append(u)}t.className&&n.addClass(t.className),null===t.minTime&&null===t.durationTime||!t.showDuration||(n.addClass("ui-timepicker-with-duration"),n.addClass("ui-timepicker-step-"+t.step));var m=t.minTime;"function"==typeof t.durationTime?m=v(t.durationTime()):null!==t.durationTime&&(m=t.durationTime);var d=null!==t.minTime?t.minTime:0,f=null!==t.maxTime?t.maxTime:d+w-1;d>=f&&(f+=w),f===w-1&&-1!==t.timeFormat.indexOf("H")&&(f=w);for(var T=t.disableTimeRanges,b=0,y=T.length,l=d;f>=l;l+=60*t.step){var x=l,H=k(x,t.timeFormat);if(t.useSelect){var C=e("<option />",{value:H});C.text(H)}else{var C=e("<li />");C.data("time",86400>=x?x:x%86400),C.text(H)}if((null!==t.minTime||null!==t.durationTime)&&t.showDuration){var R=g(l-m,t.step);if(t.useSelect)C.text(C.text()+" ("+R+")");else{var M=e("<span />",{"class":"ui-timepicker-duration"});M.text(" ("+R+")"),C.append(M)}}y>b&&(x>=T[b][1]&&(b+=1),T[b]&&x>=T[b][0]&&x<T[b][1]&&(t.useSelect?C.prop("disabled",!0):C.addClass("ui-timepicker-disabled"))),s.append(C)}if(n.data("timepicker-input",i),i.data("timepicker-list",n),t.useSelect)s.val(r(i.val(),t)),s.on("focus",function(){e(this).data("timepicker-input").trigger("showTimepicker")}),s.on("blur",function(){e(this).data("timepicker-input").trigger("hideTimepicker")}),s.on("change",function(){p(i,e(this).val(),"select")}),i.hide().after(s);else{var S=t.appendTo;"string"==typeof S?S=e(S):"function"==typeof S&&(S=S(i)),S.append(n),c(i,s),s.on("mousedown","li",function(){i.off("focus.timepicker"),i.on("focus.timepicker-ie-hack",function(){i.off("focus.timepicker-ie-hack"),i.on("focus.timepicker",D.show)}),o(i)||i[0].focus(),s.find("li").removeClass("ui-timepicker-selected"),e(this).addClass("ui-timepicker-selected"),h(i)&&(i.trigger("hideTimepicker"),n.hide())})}}function a(i,t){var a,r,s;return"object"==typeof i?(a=i.label,r=i.className,s=i.value):"string"==typeof i?a=i:e.error("Invalid noneOption value"),t?e("<option />",{value:s,"class":r,text:a}):e("<li />",{"class":r,text:a}).data("time",s)}function r(i,t){if(e.isNumeric(i)||(i=v(i)),null===i)return null;var a=60*t.step;return k(Math.round(i/a)*a,t.timeFormat)}function s(){return new Date(1970,1,1,0,0,0)}function n(i){var t=e(i.target),a=t.closest(".ui-timepicker-input");0===a.length&&0===t.closest(".ui-timepicker-wrapper").length&&(D.hide(),e(document).unbind(".ui-timepicker"))}function o(e){var i=e.data("timepicker-settings");return(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&i.disableTouchKeyboard}function l(i,t,a){if(!a&&0!==a)return!1;var r=i.data("timepicker-settings"),s=!1,n=30*r.step;return t.find("li").each(function(i,t){var r=e(t);if("number"==typeof r.data("time")){var o=r.data("time")-a;return Math.abs(o)<n||o==n?(s=r,!1):void 0}}),s}function c(e,i){i.find("li").removeClass("ui-timepicker-selected");var t=v(m(e),e.data("timepicker-settings"));if(null!==t){var a=l(e,i,t);if(a){var r=a.offset().top-i.offset().top;(r+a.outerHeight()>i.outerHeight()||0>r)&&i.scrollTop(i.scrollTop()+a.position().top-a.outerHeight()),a.addClass("ui-timepicker-selected")}}}function u(i){if(""!==this.value){{var t=e(this);t.data("timepicker-list")}if(!t.is(":focus")||i&&"change"==i.type){var a=v(this.value);if(null===a)return void t.trigger("timeFormatError");var r=t.data("timepicker-settings"),s=!1;if(null!==r.minTime&&a<r.minTime?s=!0:null!==r.maxTime&&a>r.maxTime&&(s=!0),e.each(r.disableTimeRanges,function(){return a>=this[0]&&a<this[1]?(s=!0,!1):void 0}),r.forceRoundTime){var n=a%(60*r.step);n>=30*r.step?a+=60*r.step-n:a-=n}var o=k(a,r.timeFormat);s?p(t,o,"error")&&t.trigger("timeRangeError"):p(t,o)}}}function m(e){return e.is("input")?e.val():e.data("ui-timepicker-value")}function p(e,i,t){if(e.is("input")){e.val(i);var a=e.data("timepicker-settings");a.useSelect&&e.data("timepicker-list").val(r(i,a))}return e.data("ui-timepicker-value")!=i?(e.data("ui-timepicker-value",i),"select"==t?e.trigger("selectTime").trigger("changeTime").trigger("change"):"error"!=t&&e.trigger("changeTime"),!0):(e.trigger("selectTime"),!1)}function d(i){var t=e(this),a=t.data("timepicker-list");if(!a||!a.is(":visible")){if(40!=i.keyCode)return!0;D.show.call(t.get(0)),a=t.data("timepicker-list"),o(t)||t.focus()}switch(i.keyCode){case 13:return h(t)&&D.hide.apply(this),i.preventDefault(),!1;case 38:var r=a.find(".ui-timepicker-selected");return r.length?r.is(":first-child")||(r.removeClass("ui-timepicker-selected"),r.prev().addClass("ui-timepicker-selected"),r.prev().position().top<r.outerHeight()&&a.scrollTop(a.scrollTop()-r.outerHeight())):(a.find("li").each(function(i,t){return e(t).position().top>0?(r=e(t),!1):void 0}),r.addClass("ui-timepicker-selected")),!1;case 40:return r=a.find(".ui-timepicker-selected"),0===r.length?(a.find("li").each(function(i,t){return e(t).position().top>0?(r=e(t),!1):void 0}),r.addClass("ui-timepicker-selected")):r.is(":last-child")||(r.removeClass("ui-timepicker-selected"),r.next().addClass("ui-timepicker-selected"),r.next().position().top+2*r.outerHeight()>a.outerHeight()&&a.scrollTop(a.scrollTop()+r.outerHeight())),!1;case 27:a.find("li").removeClass("ui-timepicker-selected"),D.hide();break;case 9:D.hide();break;default:return!0}}function f(i){var t=e(this),a=t.data("timepicker-list");if(!a||!a.is(":visible"))return!0;if(!t.data("timepicker-settings").typeaheadHighlight)return a.find("li").removeClass("ui-timepicker-selected"),!0;switch(i.keyCode){case 96:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 77:case 80:case 186:case 8:case 46:c(t,a);break;default:return}}function h(e){var i=e.data("timepicker-settings"),t=e.data("timepicker-list"),a=null,r=t.find(".ui-timepicker-selected");if(r.hasClass("ui-timepicker-disabled"))return!1;if(r.length&&(a=r.data("time")),null!==a)if("string"==typeof a)e.val(a);else{var s=k(a,i.timeFormat);p(e,s,"select")}return!0}function g(e,i){e=Math.abs(e);var t,a,r=Math.round(e/60),s=[];return 60>r?s=[r,x.mins]:(t=Math.floor(r/60),a=r%60,30==i&&30==a&&(t+=x.decimal+5),s.push(t),s.push(1==t?x.hr:x.hrs),30!=i&&a&&(s.push(a),s.push(x.mins))),s.join(" ")}function k(e,i){if(null!==e){var t=new Date(b.valueOf()+1e3*e);if(!isNaN(t.getTime())){for(var a,r,s="",n=0;n<i.length;n++)switch(r=i.charAt(n)){case"a":s+=t.getHours()>11?x.pm:x.am;break;case"A":s+=t.getHours()>11?x.PM:x.AM;break;case"g":a=t.getHours()%12,s+=0===a?"12":a;break;case"G":s+=t.getHours();break;case"h":a=t.getHours()%12,0!==a&&10>a&&(a="0"+a),s+=0===a?"12":a;break;case"H":a=t.getHours(),e===w&&(a=24),s+=a>9?a:"0"+a;break;case"i":var o=t.getMinutes();s+=o>9?o:"0"+o;break;case"s":e=t.getSeconds(),s+=e>9?e:"0"+e;break;default:s+=r}return s}}}function v(e,i){if(""===e)return null;if(!e||e+0==e)return e;"object"==typeof e&&(e=e.getHours()+":"+T(e.getMinutes())+":"+T(e.getSeconds())),e=e.toLowerCase();{var t;new Date(0)}if(-1===e.indexOf(":")?(t=e.match(/^([0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/),t||(t=e.match(/^([0-2][0-9]):?([0-5][0-9])?:?([0-5][0-9])?\s*([pa]?)m?$/))):t=e.match(/^(\d{1,2})(?::([0-5][0-9]))?(?::([0-5][0-9]))?\s*([pa]?)m?$/),!t)return null;var a=parseInt(1*t[1],10),r=t[4],s=a;r&&(s=12==a?"p"==t[4]?12:0:a+("p"==t[4]?12:0));var n=1*t[2]||0,o=1*t[3]||0,l=3600*s+60*n+o;if(!r&&i&&i._twelveHourTime&&i.scrollDefault){var c=l-i.scrollDefault;0>c&&c>=w/-2&&(l=(l+w/2)%w)}return l}function T(e){return("0"+e).slice(-2)}var b=s(),w=86400,y={className:null,minTime:null,maxTime:null,durationTime:null,step:30,showDuration:!1,showOnFocus:!0,timeFormat:"g:ia",scrollDefault:null,selectOnBlur:!1,disableTouchKeyboard:!1,forceRoundTime:!1,appendTo:"body",orientation:"ltr",disableTimeRanges:[],closeOnWindowScroll:!1,typeaheadHighlight:!0,noneOption:!1},x={am:"am",pm:"pm",AM:"AM",PM:"PM",decimal:".",mins:"mins",hr:"hr",hrs:"hrs"},D={init:function(a){return this.each(function(){var r=e(this),s=[];for(var n in y)r.data(n)&&(s[n]=r.data(n));var o=e.extend({},y,s,a);o.lang&&(x=e.extend(x,o.lang)),o=i(o),r.data("timepicker-settings",o),r.addClass("ui-timepicker-input"),o.useSelect?t(r):(r.prop("autocomplete","off"),r.on("click.timepicker focus.timepicker",D.show),r.on("change.timepicker",u),r.on("keydown.timepicker",d),r.on("keyup.timepicker",f),u.call(r.get(0)))})},show:function(i){var a=e(this),r=a.data("timepicker-settings");if(i){if(!r.showOnFocus)return!0;i.preventDefault()}if(r.useSelect)return void a.data("timepicker-list").focus();o(a)&&a.blur();var s=a.data("timepicker-list");if(!a.prop("readonly")&&(s&&0!==s.length&&"function"!=typeof r.durationTime||(t(a),s=a.data("timepicker-list")),!s.is(":visible"))){D.hide(),s.show();var c={};c.left="rtl"==r.orientation?a.offset().left+a.outerWidth()-s.outerWidth()+parseInt(s.css("marginLeft").replace("px",""),10):a.offset().left+parseInt(s.css("marginLeft").replace("px",""),10),c.top=a.offset().top+a.outerHeight(!0)+s.outerHeight()>e(window).height()+e(window).scrollTop()?a.offset().top-s.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10):a.offset().top+a.outerHeight()+parseInt(s.css("marginTop").replace("px",""),10),s.offset(c);var u=s.find(".ui-timepicker-selected");if(u.length||(m(a)?u=l(a,s,v(m(a))):r.scrollDefault&&(u=l(a,s,r.scrollDefault))),u&&u.length){var p=s.scrollTop()+u.position().top-u.outerHeight();s.scrollTop(p)}else s.scrollTop(0);return e(document).on("touchstart.ui-timepicker mousedown.ui-timepicker",n),r.closeOnWindowScroll&&e(document).on("scroll.ui-timepicker",n),a.trigger("showTimepicker"),this}},hide:function(){var i=e(this),t=i.data("timepicker-settings");return t&&t.useSelect&&i.blur(),e(".ui-timepicker-wrapper:visible").each(function(){var i=e(this),t=i.data("timepicker-input"),a=t.data("timepicker-settings");a&&a.selectOnBlur&&h(t),i.hide(),t.trigger("hideTimepicker")}),this},option:function(a,r){return this.each(function(){var s=e(this),n=s.data("timepicker-settings"),o=s.data("timepicker-list");if("object"==typeof a)n=e.extend(n,a);else if("string"==typeof a&&"undefined"!=typeof r)n[a]=r;else if("string"==typeof a)return n[a];n=i(n),s.data("timepicker-settings",n),o&&(o.remove(),s.data("timepicker-list",!1)),n.useSelect&&t(s)})},getSecondsFromMidnight:function(){return v(m(this))},getTime:function(e){var i=this,t=m(i);if(!t)return null;e||(e=new Date);var a=v(t),r=new Date(e);return r.setHours(a/3600),r.setMinutes(a%3600/60),r.setSeconds(a%60),r.setMilliseconds(0),r},setTime:function(e){var i=this,t=k(v(e),i.data("timepicker-settings").timeFormat);return p(i,t),i.data("timepicker-list")&&c(i,i.data("timepicker-list")),this},remove:function(){var e=this;if(e.hasClass("ui-timepicker-input")){var i=e.data("timepicker-settings");return e.removeAttr("autocomplete","off"),e.removeClass("ui-timepicker-input"),e.removeData("timepicker-settings"),e.off(".timepicker"),e.data("timepicker-list")&&e.data("timepicker-list").remove(),i.useSelect&&e.show(),e.removeData("timepicker-list"),this}}};e.fn.timepicker=function(i){return this.length?D[i]?this.hasClass("ui-timepicker-input")?D[i].apply(this,Array.prototype.slice.call(arguments,1)):this:"object"!=typeof i&&i?void e.error("Method "+i+" does not exist on jQuery.timepicker"):D.init.apply(this,arguments):this}});